{% extends 'base.html' %}
{% load widget_tweaks %}
{% block title %}Associate{% endblock %}

{% block content %}
<div class="col-sm-10 col-sm-offset-1">

    <div class="text-center">
        <h1>R<small>ig</small> I<small>nformation</small> G<small>athering</small> S<small>ystem</small></h1>
    </div>
    <h2 class="text-center">Welcome <strong>{{details.username}}</strong></h2>
    <h4 class="text-center">This is the first time you've visited RIGS with your forum account, so we need a few details to get you set up</h4>
    <hr/>
    

    {% if alreadyLoggedIn %}
        <h2 class="text-center">You are logged in to RIGS as <strong>{{loggedInUser.username}}</strong></h2>
        <div class="col-sm-8 col-sm-offset-2">
        <form action="", method="post">{% csrf_token %}
            <input type="hidden" name="UseCurrentAccount" value="1"/>
            <button type="submit" class="btn btn-lg btn-primary center btn-block">Link Forum account to RIGS Account</button>
            </form>
            <a class="btn btn-lg btn-warning center btn-block" href="{% url 'logout' %}" role="button">Logout</a>
        </div>
    {% else %}
        <h4 class="text-center"><a class="btn btn-info" href="{{login_url}}" role="button">I already have a RIGS account</a></h4>
        {% if form.errors or supplement_form.errors %}
        <div class="alert alert-danger">
            {{form.errors}}
            {{supplement_form.errors}}
        </div>
        {% endif %}

        <div class="col-sm-8 col-sm-offset-2">
            <form action="" method="post" class="form-horizontal" role="form">{% csrf_token %}
                {% for field in form %}
                    <div class="form-group">
                        <label for="{{ field.id_for_label }}" class="control-label col-sm-4">{{ field.label }}</label>
                        <div class="controls col-sm-8">
                            {% render_field field class+="form-control" placeholder=field.label %}
                        </div>
                    </div>
                {% endfor %}
                <p><input type="submit" value="Register" class="btn btn-primary pull-right"></p>
            </form>

        </div>
    {% endif %}

    
    


</div>
{% endblock %}